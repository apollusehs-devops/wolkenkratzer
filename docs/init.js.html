<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: init.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: init.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Created by arming on 7/3/16.
 */

'use strict'
const TypeException = require('./exceptions').TypeException

/** @module Core */

/**
 * @memberof module:Core
 */
function Block (name) {
  this.WKName = name
}

/**
 * Returns a JSON string version
 */
Block.prototype.toJson = function () {
  let p = JSON.parse(JSON.stringify(this))
  delete p.WKName
  return p
}

/**
 * @memberof module:Core
 */
function Command (name, parameter) {
  Block.call(this, name)
  if (parameter) {
    this.command = parameter.command
    this.env = parameter.env
    this.cwd = parameter.cwd
    this.ava = parameter.ava
    this.ignoreErrors = parameter.ignoreErrors
    this.waitAfterCompletion = parameter.waitAfterCompletion
  }
}
Command.prototype = Object.create(Block.prototype)

/**
 * @memberof module:Core
 */
function File (name, parameter) {
  Block.call(this, name)
  if (parameter) {
    this.content = parameter.content
    this.source = parameter.source
    this.encoding = parameter.encoding
    this.group = parameter.group
    this.owner = parameter.owner
    this.mode = parameter.mode
    this.authentication = parameter.authentication
    this.context = parameter.context
  }
}

File.prototype = Object.create(Block.prototype)

/**
 * @memberof module:Core
 */
function Packages (name, body) {
  Block.call(this, name)
  this.body = body
}

Packages.prototype = Object.create(Block.prototype)

/**
 * Returns a JSON string version
 * @returns {*}
 */
Packages.prototype.toJson = function () {
  return this.body
}

/**
 * @memberof module:Core
 */
function Service (name, parameter) {
  Block.call(this, name)
  if (parameter) {
    this.ensureRunning = parameter.ensureRunning
    this.enabled = parameter.enabled
    this.files = parameter.files
    this.sources = parameter.sources
    this.packages = parameter.packages
    this.commands = parameter.commands
  }
}
Service.prototype = Object.create(Block.prototype)

/**
 * @memberof module:Core
 */
function Source (name, body) {
  Block.call(this, name)
  this.body = body
}
Source.prototype = Object.create(Block.prototype)

/**
 * Returns a JSON string version
 * @returns {*}
 */
Source.prototype.toJson = function () {
  return this.body
}

/**
 * @memberof module:Core
 */
function Config (name) {
  this.WKName = name
  this.commands = {}
  this.files = {}
  this.packages = {}
  this.services = {
    sysvinit: {}
  }
  this.sources = {}
}

/**
 *
 * @param block
 */
Config.prototype.add = function (block) {
  if (block instanceof Command) {
    this.commands[block.WKName] = block
  } else if (block instanceof File) {
    this.files[block.WKName] = block
  } else if (block instanceof Packages) {
    this.packages[block.WKName] = block
  } else if (block instanceof Service) {
    this.services.sysvinit[block.WKName] = block
  } else if (block instanceof Source) {
    this.sources[block.WKName] = block
  } else {
    throw new TypeException(block.WKName + ' is not a proper type for ConfigSet ' + this.Name)
  }
}

/**
 * Returns a JSON string version
 */
Config.prototype.toJson = function () {
  let p = JSON.parse(JSON.stringify(this))
  delete p.WKName
  for (let block in p) {
    if (Object.keys(p[block]).length === 0) {
      delete p[block]
    } else {
      if (block === 'services') {
        if (Object.keys(p[block].sysvinit).length === 0) {
          delete p[block]
        } else {
          for (let sublock in this[block].sysvinit) {
            p[block].sysvinit[sublock] = this[block].sysvinit[sublock].toJson()
          }
        }
      } else {
        for (let sublock in p[ block ]) {
          p[block][sublock] = this[block][sublock].toJson()
        }
      }
    }
  }
  return p
}

/**
 * @memberof module:Core
 */
function ConfigSet (name) {
  this.WKName = name
  this.configs = []
}

/**
 *
 * @param config
 */
ConfigSet.prototype.add = function (config) {
  this.configs.push(config.WKName)
}

/**
 * Returns a JSON string version
 */
ConfigSet.prototype.toJson = function () {
  let p = JSON.parse(JSON.stringify(this))
  delete p.WKName
  return p
}

module.exports = {
  Command: Command,
  Config: Config,
  ConfigSet: ConfigSet,
  File: File,
  Packages: Packages,
  Service: Service,
  Source: Source
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Core.html">Core</a></li><li><a href="module-Macro.html">Macro</a></li></ul><h3>Classes</h3><ul><li><a href="module-Macro.Bucket.html">Bucket</a></li></ul><h3>Global</h3><ul><li><a href="global.html#chai">chai</a></li><li><a href="global.html#wk">wk</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Dec 17 2016 18:34:20 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
